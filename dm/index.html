<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-size: 20px;
        }

        input {
            font-size: 20px;
        }

        .input span:nth-child(1) {
            display: inline-block;
            width: 80px;
        }

        .input span:nth-child(2) {
            width: 80px;

            display: inline-block;
        }

        .input span:nth-child(3) {
            display: inline-block;
            margin-left: 10px;
        }

        .input input {
            display: inline-block;
            width: 90px;
        }

        pre {
            margin: 0;
        }
    </style>
</head>

<body>
    <h2>Ссылки</h2>
    <ul>
        <li> <a href="./motovario инструкции.pdf" target="_blank">Motovario инструкции</a></li>
        <li> <a href="./motovario каталог.pdf" target="_blank">Motovario каталог</a></li>
        <li> <a href="./Двигатели АИР.pdf" target="_blank">Двигатели</a></li>
        <li><a href="./таблица для расчета.pdf" target="_blank">Таблица для расчета</a></li>
        <li><a href="./Таблицы.pdf" target="_blank">Справочные таблицы</a></li>
    </ul>
    <h2>Расчет</h2>

    <script>
        const PI = Math.PI;

        printObj = (o) => {
            for (let i in o) {
                if (document.getElementById(i) == null) {
                    let div = document.createElement('div');
                    let name = document.createElement('span');
                    let input = document.createElement('input');

                    div.append(name);
                    div.append(input);
                    document.body.append(div);

                    div.className = 'input';
                    input.id = i;
                    name.innerText = i;
                    input.value = o[i];
                } else {
                    document.getElementById(i).value = o[i];
                }
            }
        }//printObj


        showObj = (o) => {
            for (let i in o) {
                if (document.getElementById(i) == null) {
                    let div = document.createElement('div');
                    let name = document.createElement('span');
                    let input = document.createElement('span');

                    div.append(name);
                    if (i[0] != '$')
                        div.append(input);
                    document.body.append(div);

                    div.className = 'input';
                    input.id = i;
                    name.innerText = i;
                    if (i[0] == '$')
                        name.id = i;
                    input.innerText = o[i].toFixed(3);
                } else {
                    if (i[0] != '$')
                        document.getElementById(i).innerText = o[i].toFixed(3);
                }
            }
        }//showObj


        printCom = (o) => {
            for (let i in o) {
                let com = document.createElement('span');
                com.innerText = o[i];
                document.getElementById(i).after(com);

            }
        }//printCom

        readObj = (o) => {
            for (let i in o) {

                o[i] = +document.getElementById(i).value.replace(',', '.');
            }
        }//readObj


        printPre = (s, id) => {
            if (document.getElementById(id) == null) {
                let pre = document.createElement('pre');
                document.body.append(pre);

                pre.id = id;
                pre.innerText = s;
            } else {
                document.getElementById(id).innerText = s;
            }

        }//printPre

        exeBut = (name, exe) => {
            let button = document.createElement('button');
            document.body.append(button);

            button.innerText = name;
            button.onclick = exe;
            button.click();
        }



        let $_coment = {

            P_1: 'Вт Мощность на быстроходном валу',
            n_2: 'об/мин Частота вращения быстроходного вала',
            T_2: 'Нм Крутящий момент на тихоходном валу',
            u: `Передаточное число редуктора`,
            u_1: 'Передаточное число первой ступени',
            K_A: "Коэф. внешней динамической нагрузки",
            K_H1: "Коэф. внутренний динамической нагрузки I ступени",
            ψ_ba1: "Коэф. ширины венца I ступени",
            σ_HP1: "Допускаемые контактные напряжения I ступени",
            σ_FP1: "Допускаемые изгибные напряжения I ступени",
            a_wmin1: "Минимальное межосевое расстояние I ступени (=>0)",
            m1: "Модуль I ступени (auto – 0)",
            z1Σ_c: "Суммарное число зубьев I ступени (auto – 0)",
            K_H2: "Коэф. внутренний динамической нагрузки II ступени",
            ψ_ba2: "Коэф. ширины венца II ступени",
            σ_HP2: "Допускаемые контактные напряжения II ступени",
            σ_FP2: "Допускаемые изгибные напряжения II ступени",
            a_wmin2: "Минимальное межосевое расстояние II ступени (=>0)",
            m2: "Модуль II ступени (auto – 0)",
            z2Σ_c: "Суммарное число зубьев II ступени (auto – 0)"
        }
        let $ = {
            P_1: 250,
            n_2: 69.1,
            T_2: 33,
            u: 20.26,//Передаточное число редуктора


            u_1: 7,//Передаточное число первой ступени

            K_A: 1.25,

            K_H1: 1,
            ψ_ba1: 0.5,
            σ_HP1: 1000,
            σ_FP1: 500,
            a_wmin1: 0,
            m1: 0,
            z1Σ_c: 0,

            K_H2: 1,
            ψ_ba2: 0.5,
            σ_HP2: 1000,
            σ_FP2: 500,
            a_wmin2: 0,
            m2: 0,
            z2Σ_c: 0,
        }

        let r40 = (a) => {
            const rad = [1, 1.06, 1.12, 1.18, 1.25, 1.32, 1.40, 1.50, 1.60, 1.70, 1.80, 1.90, 2.00, 2.12, 2.24, 2.36, 2.50, 2.65, 2.80, 3.00, 3.15, 3.35, 3.55, 3.75, 4.00, 4.25, 4.5, 4.75, 5.00, 5.30, 5.60, 6.00, 6.30, 6.70, 7.1, 8.00, 8.5, 9.00, 9.50]
            let l = Math.floor(Math.log10(a));
            let b = a / 10 ** l;
            let i;
            for (i in rad) if (rad[i] >= b) break;
            return rad[i] * 10 ** l
        };

        let module = (a) => {
            const rad = [1, 1.125, 1.25, 1.375, 1.5, 1.75, 2, 2.25, 3, 3.5, 4, 4.5, 6, 7, 8, 9];
            let l = Math.floor(Math.log10(a));
            let b = a / 10 ** l;
            let i;
            for (i in rad) if (rad[i] >= b) break;
            return rad[i] * 10 ** l
        };
        for (let i in $) {
            let buf = localStorage.getItem("13c4337f1c0649bdbbb63b0e60fc7b2e_"+i);
            if (buf)
                $[i] = buf;
        }

        printObj($);
        printCom($_coment);

        let a_w = ({ u = 5, K_A = 1.25, K_H = 1, T = 10, ψ_ba = 0.5, σ_HP = 1000 } = {}) => {
            return 430 * (u + 1) * ((K_A * K_H * T) / (ψ_ba * u * σ_HP ** 2)) ** (1 / 3)
        }


        let out = {};
        let out_com = {
            n_1: 'об/мин Частота вращения быстроходного вала',
            T_1: 'Нм Вращающий момент на быстроходном валу',
            P_2: 'Вт Мощность на выходном валу',
            η: "КПД",
            u_2: "Передаточное число второй ступени",
            n3: "об/мин Частота вращения промежуточного вала",
            T_3: "Нм Крутящий момент на промежуточном валу",
            d_1: "мм Быстроходный вал",
            d_2: "мм Тихоходный вал",
            d_3: "мм Промежуточный вал",
            a_w1: "мм Межосевое I ступени",
            d_w11: "мм Начальный диаметр шестерни I ступени",
            d_w12: "мм Начальный диаметр колеса I ступени",
            b_w1: "мм Ширина венца I ступени",
            m1_max: "мм Минимальный модуль I ступени",
            m1_min: "мм Максимальный модуль I ступени",
            a_w2: "мм Межосевое II ступени",
            d_w21: "мм Начальный диаметр шестерни II ступени",
            d_w22: "мм Начальный диаметр колеса II ступени",
            b_w2: "мм Ширина венца II ступени",
            m2_max: "мм Минимальный модуль II ступени",
            m2_min: "мм Максимальный модуль II ступени",
            Δ_aw: "мм Несоосность",
            h: "мм Габарит",

            m_1: "мм Модуль",
            β1_min: "° Минимальный угол наклона зуба",
            z1Σmin: "Минимальное суммарное кол-во зубьев",
            z1Σmax: "Максимальное суммарное кол-во зубьев",
            z1Σ: "Принятое суммарное кол-во зубьев",
            z11: "Число зубьев шестерни",
            z12: "Число зубьев колеса",
            u1_c: "Точное передаточное отношение",
            Δ1u: "% Отклонение передаточное отношения",
            β1: "° Угол наклона зубьев",
            α1t: "° Угол зацепления",
            Ft1: "Н Окружная сила",
            Fr1: "Н Радиальная сила",
            Fa1: "Н Осевая сила",
            d11: "мм Делительный диаметр шестерни",
            db11: "мм Основной диаметр шестерни",
            da11: "мм Диаметр вершин шестерни",
            df11: "мм Диаметр впадин шестерни",
            d12: "мм Делительный диаметр колеса",
            db12: "мм Основной диаметр колеса",
            da12: "мм Диаметр вершин колеса",
            df12: "мм Диаметр впадин колеса",


            m_1: "мм Модуль",
            β2_min: "° Минимальный угол наклона зуба",
            z2Σmin: "Минимальное суммарное кол-во зубьев",
            z2Σmax: "Максимальное суммарное кол-во зубьев",
            z2Σ: "Принятое суммарное кол-во зубьев",
            z21: "Число зубьев шестерни",
            z22: "Число зубьев колеса",
            u2_c: "Точное передаточное отношение",
            Δ2u: "% Отклонение передаточное отношения",
            β2: "° Угол наклона зубьев",
            α2t: "° Угол зацепления",
            Ft2: "Н Окружная сила",
            Fr2: "Н Радиальная сила",
            Fa2: "Н Осевая сила",
            d21: "мм Делительный диаметр шестерни",
            db21: "мм Основной диаметр шестерни",
            da21: "мм Диаметр вершин шестерни",
            df21: "мм Диаметр впадин шестерни",
            d22: "мм Делительный диаметр колеса",
            db22: "мм Основной диаметр колеса",
            da22: "мм Диаметр вершин колеса",
            df22: "мм Диаметр впадин колеса",
            u_c: "Точное передаточное число редуктора",
            Δu_c: "% Отклонение передаточного числа редуктора (=>0)"
        }



        exeBut('Обновить',
            () => {


                readObj($);
                for (let i in $) {
                    localStorage.setItem("13c4337f1c0649bdbbb63b0e60fc7b2e_"+i, $[i]);
                }
                printObj($);



                //кинематический расчет
                out.$_кинематический_расчет = 0;
                out.n_1 = $.n_2 * $.u;
                out.T_1 = $.P_1 / out.n_1 * 60 / 2 / PI;
                out.P_2 = $.T_2 * $.n_2 * 2 * PI / 60;
                out.η = out.P_2 / $.P_1;
                out.u_2 = $.u / $.u_1;
                out.n3 = $.n_2 * out.u_2;
                out.T_3 = out.T_1 * $.u_1 * out.η ** 0.5;

                //Оценка диаметров валов
                out.$_Оценка_диаметров_валов = 0;
                out.d_1 = 7 * out.T_1 ** (1 / 3);
                out.d_3 = 7 * out.T_3 ** (1 / 3);
                out.d_2 = 7 * $.T_2 ** (1 / 3);

                //Расчет габаритов
                out.$_Расчет_габаритов = 0;
                out.a_w1 = r40(Math.max($.a_wmin1, 430 * ($.u_1 + 1) * (($.K_A * $.K_H1 * out.T_1) / ($.ψ_ba1 * $.u_1 * $.σ_HP1 ** 2)) ** (1 / 3)));
                out.d_w11 = 2 * out.a_w1 / ($.u_1 + 1);
                out.d_w12 = out.d_w11 * $.u_1;
                out.b_w1 = out.a_w1 * $.ψ_ba1;
                out.m1_max = out.d_w11 / 17;
                out.m1_min = $.K_A * $.K_H1 * 2000 * out.T_1 / out.d_w11 / out.b_w1 / $.σ_FP1;


                out.a_w2 = r40(Math.max($.a_wmin2, 430 * (out.u_2 + 1) * (($.K_A * $.K_H2 * out.T_3) / ($.ψ_ba2 * out.u_2 * $.σ_HP2 ** 2)) ** (1 / 3)));
                out.d_w21 = 2 * out.a_w2 / (out.u_2 + 1);
                out.d_w22 = out.d_w21 * out.u_2;
                out.b_w2 = out.a_w2 * $.ψ_ba2;
                out.m2_max = out.d_w21 / 17;
                out.m2_min = $.K_A * $.K_H2 * 2000 * $.T_2 / out.d_w21 / out.b_w2 / $.σ_FP2;

                out.Δ_aw = out.a_w2 - out.a_w1;
                out.h = out.d_w22 + out.d_w21 / 2 + out.d_w12 / 2;

                //Расчет первой ступени
                out.$_Расчет_первой_ступени = 0;
                if (out.m1_min <= out.m1_max)
                    out.m_1 = module((out.m1_min + out.m1_max) / 2);

                if ($.m1 != 0) out.m_1 = $.m1;

                out.β1_min = Math.asin(PI * out.m_1 / out.b_w1) * 180 / PI;


                out.z1Σmin = Math.ceil((2 * out.a_w1 / out.m_1) * Math.cos(22 * PI / 180));
                out.z1Σmax = Math.floor((2 * out.a_w1 / out.m_1) * Math.cos(out.β1_min * PI / 180));


                out.z1Σ = out.z1Σmax;
                if ($.z1Σ_c != 0) out.z1Σ = $.z1Σ_c;

                out.z11 = Math.round(out.z1Σ / ($.u_1 + 1));
                out.z12 = out.z1Σ - out.z11;
                out.u1_c = out.z12 / out.z11;
                out.Δ1u = (out.u1_c - $.u_1) / $.u_1 * 100;
                out.β1 = Math.acos(out.m_1 * out.z1Σ / 2 / out.a_w1) * 180 / PI;
                out.α1t = Math.atan(Math.tan(20 / 180 * PI) / Math.cos(out.β1 / 180 * PI)) * 180 / PI;
                out.Ft1 = 2000 * out.T_1 / out.d_w11;
                out.Fr1 = out.Ft1 * Math.tan(out.α1t * PI / 180);
                out.Fa1 = out.Ft1 * Math.tan(out.β1 / 180 * PI);

                out.d11 = out.m_1 * out.z11 / Math.cos(out.β1 / 180 * PI);
                out.db11 = out.d11 * Math.cos(out.α1t * PI / 180);
                out.da11 = out.d11 + 2 * out.m_1;
                out.df11 = out.d11 - 2.5 * out.m_1;

                out.d12 = out.m_1 * out.z12 / Math.cos(out.β1 / 180 * PI);
                out.db12 = out.d12 * Math.cos(out.α1t * PI / 180);
                out.da12 = out.d12 + 2 * out.m_1;
                out.df12 = out.d12 - 2.5 * out.m_1;


                //Расчет второй ступени
                out.$_Расчет_второй_ступени = 0;
                if (out.m2_min <= out.m2_max)
                    out.m_2 = module((out.m2_min + out.m2_max) / 2);

                if ($.m2 != 0) out.m_2 = $.m2;
                out.β2_min = Math.asin(PI * out.m_2 / out.b_w2) * 180 / PI;




                out.z2Σmin = Math.ceil((2 * out.a_w2 / out.m_2) * Math.cos(22 * PI / 180));
                out.z2Σmax = Math.floor((2 * out.a_w2 / out.m_2) * Math.cos(out.β2_min * PI / 180));


                out.z2Σ = out.z2Σmax;
                if ($.z2Σ_c != 0) out.z2Σ = $.z2Σ_c;

                out.z21 = Math.round(out.z2Σ / (out.u_2 + 1));
                out.z22 = out.z2Σ - out.z21;
                out.u2_c = out.z22 / out.z21;
                out.Δ2u = (out.u2_c - out.u_2) / out.u_2 * 100;
                out.β2 = Math.acos(out.m_2 * out.z2Σ / 2 / out.a_w2) * 180 / PI;
                out.α2t = Math.atan(Math.tan(20 / 180 * PI) / Math.cos(out.β2 / 180 * PI)) * 180 / PI;
                out.Ft2 = 2000 * out.T_3 / out.d_w21;
                out.Fr2 = out.Ft2 * Math.tan(out.α2t * PI / 180);
                out.Fa2 = out.Ft2 * Math.tan(out.β2 / 180 * PI);

                out.d21 = out.m_2 * out.z21 / Math.cos(out.β2 / 180 * PI);
                out.db21 = out.d21 * Math.cos(out.α2t * PI / 180);
                out.da21 = out.d21 + 2 * out.m_2;
                out.df21 = out.d21 - 2.5 * out.m_2;

                out.d22 = out.m_2 * out.z22 / Math.cos(out.β2 / 180 * PI);
                out.db22 = out.d22 * Math.cos(out.α2t * PI / 180);
                out.da22 = out.d22 + 2 * out.m_2;
                out.df22 = out.d22 - 2.5 * out.m_2;

                //Общее передаточное число
                out.$_Общее_передаточное_число = 0;
                out.u_c = out.z22 * out.z12 / out.z21 / out.z11;
                out.Δu_c = (out.u_c - $.u) / $.u * 100;

                showObj(out);

            }
        )
        printCom(out_com);



    </script>

</body>

</html>